<div class="panel panel-primary">
  <div class="panel-heading">
    <div ng-if="mode=='them'" class="panel-title">{{"them_diem_ban_cua_hang_moi"|translate}}</div>
      <div ng-if="mode=='sua'" class="panel-title">{{"cap_nhat_diem_ban_cua_hang_moi"|translate}}</div>
  </div>
  <div class="panel-body">
    <form class="form-horizontal form margin-bottom-40" role="form" id="form-shop" mode="{{mode}}">
      <div class="form-heading text-center">
        <button class="btn btn-success" ng-if="mode=='them'"><i class="fa fa-plus"></i> {{"them"|translate}}</button>
        <button class="btn btn-success" ng-if="mode=='sua'"><i class="fa fa-plus"></i> {{"luu"|translate}}</button>
        <div class="btn btn-danger" ng-click="goToList()">
          <i class="fa fa-close"></i> {{"huy"|translate}}
        </div>
      </div>
      <div class="form-body">
        <div class="col-md-12">
          <div class="row">
            <div class="col-md-6">
              <div class="form-group form-md-line-input">
                <label class="col-md-4 control-label text-right">{{"ten"|translate}}</label>
                <div class="col-md-8">
                  <input type="text" class="form-control" name="name" ng-model="data.name" />
                  <div class="form-control-focus"></div>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group form-md-line-input">
                <label class="col-md-4 control-label text-right">{{"so_dien_thoai"|translate}}</label>
                <div class="col-md-8">
                  <input class="form-control" name="isdn" ng-model="data.isdn" />
                  <div class="form-control-focus"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">
            <div class="col-md-6">
              <div class="form-group form-md-line-input">
                <label class="col-md-4 control-label text-right">{{"dia_chi"|translate}}</label>
                <div class="col-md-8">
                  <input type="text" class="form-control" name="addr" ng-model="data.addr" />
                  <div class="form-control-focus"></div>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group form-md-line-input">
                <label class="col-md-4 control-label text-right">{{"gio_mo_cua"|translate}}</label>
                <div class="col-md-8">
                  <input class="form-control" name="openTime" ng-model="data.openTime" />
                  <div class="form-control-focus"></div>
                </div>
              </div>
            </div>
          </div>

          <div class="row">

            <div class="col-md-6">
              <div class="form-group form-md-line-input">
                <label class="col-md-4 control-label text-right">{{"tinh_thanh_pho"|translate}}</label>
                <div class="col-md-8">
                  <select select2 class="form-control" name="provinceId" get-data="getListProvince()" value="{{data.provinceId}}" ng-model="data.provinceId" placeholder="{{provincePlaceholder}}"></select>
                  <div class="form-control-focus"></div>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group form-md-line-input">
                <label class="col-md-4 control-label text-right">{{"kinh_do"|translate}}</label>
                <div class="col-md-8">
                  <input class="form-control" name="longitude" ng-model="data.longitude" />
                  <div class="form-control-focus"></div>
                </div>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group form-md-line-input">
                <label class="col-md-4 control-label text-right">{{"quan_huyen"|translate}}</label>
                <div class="col-md-8">
                  <select select2 class="form-control" name="districtId" get-data="getListDistrict()" ng-model="data.districtId" placeholder="{{districtPlaceholder}}"></select>
                  <div class="form-control-focus"></div>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group form-md-line-input">
                <label class="col-md-4 control-label text-right">{{"vi_do"|translate}}</label>
                <div class="col-md-8">
                  <input class="form-control" name="latitude" ng-model="data.latitude" />
                  <div class="form-control-focus"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
          <div class="col-md-6">

              <div class="form-group form-md-radios">
                  <label class="col-md-4 control-label" for="form_control_1">{{"loai"|translate}}</label>
                  <div class="col-md-8">
                      <div class="md-radio-inline">
                          <div class="md-radio">
                              <input type="radio" id="checkbox1_8" name="type" value="0" ng-model="data.type" class="md-radiobtn">
                              <label for="checkbox1_8">
                                  <span></span>
                                  <span class="check"></span>
                                  <span class="box"></span>{{"cua_hang"|translate}}
                              </label>
                          </div>
                          <div class="md-radio">
                              <input type="radio" id="checkbox1_9" name="type" value="1" ng-model="data.type" class="md-radiobtn">
                              <label for="checkbox1_9">
                                  <span></span>
                                  <span class="check"></span>
                                  <span class="box"></span> {{"diem_ban"|translate}}
                              </label>
                          </div>

                      </div>
                  </div>
              </div>
          </div>
      </div>
      <div class="col-md-12">
        <div ng-if="mode=='them'" ng-click="reset()" class="clear-form-data btn btn-sm btn-circle btn-danger">{{"xoa"|translate}}</div>
      </div>
    </form>
  </div>
</div>
<script>
  $(document).ready(function () {
    var scope = angular.element("#current-controller").scope();
    validator = myApp.validateForm("#form-shop", {
      rules: {
        name: {
          required: true,
          maxlength: config.validate.length200
        },
        addr: {
          required: true,
          maxlength: config.validate.length200
        },
        isdn: {
          required: true,
          maxlength: config.validate.length20,
          //number:true,
          phone: true
        },
        openTime: {
          required: true,
          maxlength: config.validate.length20
        },
        provinceId: {
          required: true
        },
        districtId: {
          required: true
        },
        longitude: {
            number: true,
            required: true,
            min: -999,
            max: 999,
            maxlength: config.validate.length10
        },
        latitude: {
            number: true,
            required: true,
            min: -999,
            max: 999,
            maxlength: config.validate.length10
        },
        type: {
            required:true
        }
      },
      messages: {
        name: {
          required: validateMessages.ErrRequired,
          maxlength: validateMessages.ErrMaxLength200
        },
        addr: {
          required: validateMessages.ErrRequired,
          maxlength: validateMessages.ErrMaxLength200
        },
        isdn: {
          required: validateMessages.ErrRequired,
          maxlength: validateMessages.ErrMaxLength20,
          phone: validateMessages.ErrPhonePattern,
          number: validateMessages.ErrNumber
        },
        openTime: {
          required: validateMessages.ErrRequired,
          maxlength: validateMessages.ErrMaxLength20
        },
        provinceId: {
          required: validateMessages.ErrRequired
        },
        districtId: {
          required: validateMessages.ErrRequired
        },
        longitude: {
            number: validateMessages.ErrNumber,
            required: validateMessages.ErrRequired,
            min: validateMessages.ErrMin,
            max: validateMessages.ErrMax,

            maxLength: validateMessages.ErrMaxLength10
        },
        latitude: {
            number: validateMessages.ErrNumber,
            required: validateMessages.ErrRequired,
            min: validateMessages.ErrMin,
            max: validateMessages.ErrMax,

            maxLength: validateMessages.ErrMaxLength10
        },
        type: {
            required: validateMessages.ErrRequired
        }
      },
      submitHandler: function (form) {
        if ($(form).attr("mode") == 'them') {
          scope.add();
        }
        else if ($(form).attr("mode") == 'sua') {
          scope.update();
        }
      }
    });
  });
</script>
